{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/richardflynn/decode/book-club-with-socket/pages/signup.jsx\";\nvar __jsx = React.createElement;\nimport Layout from \"../components/MyLayout\";\nimport React, { Component } from \"react\";\nimport fetch from \"isomorphic-unfetch\";\n\nvar Signup =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Signup, _Component);\n\n  function Signup(props) {\n    var _this;\n\n    _classCallCheck(this, Signup);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Signup).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"usernameHandler\", function (event) {\n      _this.setState({\n        username: event.target.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"passwordHandler\", function (event) {\n      _this.setState({\n        password: event.target.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"signupHandler\",\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(event) {\n        var data, response, responseBody, parsedBody;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                event.preventDefault();\n                data = new FormData();\n                data.append(\"username\", _this.state.username);\n                data.append(\"password\", _this.state.password);\n                _context.next = 6;\n                return fetch(\"/signup\", {\n                  method: \"POST\",\n                  body: data\n                });\n\n              case 6:\n                response = _context.sent;\n                _context.next = 9;\n                return response.text();\n\n              case 9:\n                responseBody = _context.sent;\n                console.log(responseBody);\n                parsedBody = JSON.parse(responseBody);\n\n                if (parsedBody.success) {\n                  _context.next = 16;\n                  break;\n                }\n\n                alert(parsedBody.msg);\n\n                _this.setState({\n                  password: \"\",\n                  username: \"\"\n                });\n\n                return _context.abrupt(\"return\");\n\n              case 16:\n                if (parsedBody.success) {\n                  console.log(\"parsedBody = \", responseBody);\n                  alert(\"Signup successful\");\n                }\n\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"render\", function () {\n      return __jsx(Layout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, __jsx(\"form\", {\n        onSubmit: _this.signupHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, __jsx(\"input\", {\n        type: \"text\",\n        name: \"username\",\n        placeholder: \"enter a username\",\n        onChange: _this.usernameHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }), __jsx(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"enter a password\",\n        onChange: _this.usernameHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }), __jsx(\"input\", {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }))));\n    });\n\n    _this.state = {\n      username: \"\",\n      password: \"\"\n    };\n    return _this;\n  }\n\n  return Signup;\n}(Component);\n\nexport default Signup;","map":{"version":3,"sources":["/Users/richardflynn/decode/book-club-with-socket/pages/signup.jsx"],"names":["Layout","React","Component","fetch","Signup","props","event","setState","username","target","value","password","preventDefault","data","FormData","append","state","method","body","response","text","responseBody","console","log","parsedBody","JSON","parse","success","alert","msg","signupHandler","usernameHandler"],"mappings":"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","sourcesContent":["import Layout from \"../components/MyLayout\";\nimport React, { Component } from \"react\";\nimport fetch from \"isomorphic-unfetch\";\n\nclass Signup extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: \"\",\n      password: \"\"\n    };\n  }\n\n  usernameHandler = event => {\n    this.setState({ username: event.target.value });\n  };\n\n  passwordHandler = event => {\n    this.setState({ password: event.target.value });\n  };\n\n  signupHandler = async event => {\n    event.preventDefault();\n    let data = new FormData();\n    data.append(\"username\", this.state.username);\n    data.append(\"password\", this.state.password);\n    let response = await fetch(\"/signup\", { method: \"POST\", body: data });\n    let responseBody = await response.text();\n    console.log(responseBody);\n    let parsedBody = JSON.parse(responseBody);\n    if (!parsedBody.success) {\n      alert(parsedBody.msg);\n      this.setState({ password: \"\", username: \"\" });\n      return;\n    }\n    if (parsedBody.success) {\n      console.log(\"parsedBody = \", responseBody);\n      alert(\"Signup successful\");\n    }\n  };\n\n  render = () => {\n    return (\n      <Layout>\n        <div>\n          <form onSubmit={this.signupHandler}>\n            <input\n              type=\"text\"\n              name=\"username\"\n              placeholder=\"enter a username\"\n              onChange={this.usernameHandler}\n            />\n            <input\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"enter a password\"\n              onChange={this.usernameHandler}\n            />\n            <input type=\"submit\" />\n          </form>\n        </div>\n      </Layout>\n    );\n  };\n}\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}