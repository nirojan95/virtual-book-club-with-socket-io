{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/richardflynn/decode/book-club-with-socket/pages/signup.jsx\";\nvar __jsx = React.createElement;\nimport Layout from \"../components/MyLayout\";\nimport React, { Component } from \"react\";\nimport fetch from \"isomorphic-unfetch\";\n\nclass Signup extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"usernameHandler\", event => {\n      this.setState({\n        username: event.target.value\n      });\n    });\n\n    _defineProperty(this, \"passwordHandler\", event => {\n      this.setState({\n        password: event.target.value\n      });\n    });\n\n    _defineProperty(this, \"signupHandler\", async event => {\n      event.preventDefault();\n      let data = new FormData();\n      data.append(\"username\", this.state.username);\n      data.append(\"password\", this.state.password);\n      let response = await fetch(\"/signup\", {\n        method: \"POST\",\n        body: data\n      });\n      let responseBody = await response.text();\n      let parsedBody = JSON.parse(responseBody);\n      console.log(parsedBody);\n\n      if (!parsedBody.success) {\n        alert(parsedBody.msg);\n        this.setState({\n          password: \"\",\n          username: \"\"\n        });\n        return;\n      }\n\n      if (parsedBody.success) {\n        console.log(\"parsedBody = \", responseBody);\n        alert(\"Signup successful\");\n      }\n    });\n\n    _defineProperty(this, \"render\", () => {\n      return __jsx(Layout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, __jsx(\"form\", {\n        onSubmit: this.signupHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, __jsx(\"input\", {\n        type: \"text\",\n        name: \"username\",\n        placeholder: \"enter a username\",\n        onChange: this.usernameHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }), __jsx(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"enter a password\",\n        onChange: this.usernameHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }), __jsx(\"input\", {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }))));\n    });\n\n    this.state = {\n      username: \"\",\n      password: \"\"\n    };\n  }\n\n}\n\nexport default Signup;","map":{"version":3,"sources":["/Users/richardflynn/decode/book-club-with-socket/pages/signup.jsx"],"names":["Layout","React","Component","fetch","Signup","constructor","props","event","setState","username","target","value","password","preventDefault","data","FormData","append","state","response","method","body","responseBody","text","parsedBody","JSON","parse","console","log","success","alert","msg","signupHandler","usernameHandler"],"mappings":";;;AAAA,OAAOA,MAAP,MAAmB,wBAAnB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,oBAAlB;;AAEA,MAAMC,MAAN,SAAqBF,SAArB,CAA+B;AAC7BG,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,6CAQDC,KAAK,IAAI;AACzB,WAAKC,QAAL,CAAc;AAAEC,QAAAA,QAAQ,EAAEF,KAAK,CAACG,MAAN,CAAaC;AAAzB,OAAd;AACD,KAVkB;;AAAA,6CAYDJ,KAAK,IAAI;AACzB,WAAKC,QAAL,CAAc;AAAEI,QAAAA,QAAQ,EAAEL,KAAK,CAACG,MAAN,CAAaC;AAAzB,OAAd;AACD,KAdkB;;AAAA,2CAgBH,MAAMJ,KAAN,IAAe;AAC7BA,MAAAA,KAAK,CAACM,cAAN;AACA,UAAIC,IAAI,GAAG,IAAIC,QAAJ,EAAX;AACAD,MAAAA,IAAI,CAACE,MAAL,CAAY,UAAZ,EAAwB,KAAKC,KAAL,CAAWR,QAAnC;AACAK,MAAAA,IAAI,CAACE,MAAL,CAAY,UAAZ,EAAwB,KAAKC,KAAL,CAAWL,QAAnC;AACA,UAAIM,QAAQ,GAAG,MAAMf,KAAK,CAAC,SAAD,EAAY;AAAEgB,QAAAA,MAAM,EAAE,MAAV;AAAkBC,QAAAA,IAAI,EAAEN;AAAxB,OAAZ,CAA1B;AACA,UAAIO,YAAY,GAAG,MAAMH,QAAQ,CAACI,IAAT,EAAzB;AACA,UAAIC,UAAU,GAAGC,IAAI,CAACC,KAAL,CAAWJ,YAAX,CAAjB;AACAK,MAAAA,OAAO,CAACC,GAAR,CAAYJ,UAAZ;;AACA,UAAI,CAACA,UAAU,CAACK,OAAhB,EAAyB;AACvBC,QAAAA,KAAK,CAACN,UAAU,CAACO,GAAZ,CAAL;AACA,aAAKtB,QAAL,CAAc;AAAEI,UAAAA,QAAQ,EAAE,EAAZ;AAAgBH,UAAAA,QAAQ,EAAE;AAA1B,SAAd;AACA;AACD;;AACD,UAAIc,UAAU,CAACK,OAAf,EAAwB;AACtBF,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BN,YAA7B;AACAQ,QAAAA,KAAK,CAAC,mBAAD,CAAL;AACD;AACF,KAlCkB;;AAAA,oCAoCV,MAAM;AACb,aACE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAM,QAAA,QAAQ,EAAE,KAAKE,aAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,IAAI,EAAC,UAFP;AAGE,QAAA,WAAW,EAAC,kBAHd;AAIE,QAAA,QAAQ,EAAE,KAAKC,eAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAOE;AACE,QAAA,IAAI,EAAC,UADP;AAEE,QAAA,IAAI,EAAC,UAFP;AAGE,QAAA,WAAW,EAAC,kBAHd;AAIE,QAAA,QAAQ,EAAE,KAAKA,eAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAPF,EAaE;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAbF,CADF,CADF,CADF;AAqBD,KA1DkB;;AAEjB,SAAKf,KAAL,GAAa;AACXR,MAAAA,QAAQ,EAAE,EADC;AAEXG,MAAAA,QAAQ,EAAE;AAFC,KAAb;AAID;;AAP4B;;AA8D/B,eAAeR,MAAf","sourcesContent":["import Layout from \"../components/MyLayout\";\nimport React, { Component } from \"react\";\nimport fetch from \"isomorphic-unfetch\";\n\nclass Signup extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: \"\",\n      password: \"\"\n    };\n  }\n\n  usernameHandler = event => {\n    this.setState({ username: event.target.value });\n  };\n\n  passwordHandler = event => {\n    this.setState({ password: event.target.value });\n  };\n\n  signupHandler = async event => {\n    event.preventDefault();\n    let data = new FormData();\n    data.append(\"username\", this.state.username);\n    data.append(\"password\", this.state.password);\n    let response = await fetch(\"/signup\", { method: \"POST\", body: data });\n    let responseBody = await response.text();\n    let parsedBody = JSON.parse(responseBody);\n    console.log(parsedBody);\n    if (!parsedBody.success) {\n      alert(parsedBody.msg);\n      this.setState({ password: \"\", username: \"\" });\n      return;\n    }\n    if (parsedBody.success) {\n      console.log(\"parsedBody = \", responseBody);\n      alert(\"Signup successful\");\n    }\n  };\n\n  render = () => {\n    return (\n      <Layout>\n        <div>\n          <form onSubmit={this.signupHandler}>\n            <input\n              type=\"text\"\n              name=\"username\"\n              placeholder=\"enter a username\"\n              onChange={this.usernameHandler}\n            />\n            <input\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"enter a password\"\n              onChange={this.usernameHandler}\n            />\n            <input type=\"submit\" />\n          </form>\n        </div>\n      </Layout>\n    );\n  };\n}\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}